<ion-header>
  <ion-toolbar>
    <ion-item color="primary">
      <ion-avatar slot="start">
        <img src="assets/icon/person.png" />
      </ion-avatar>
      <!-- <p class="ion-margin"> -->

      <ion-item color="primary" class="ion-no-padding" style="width: 100%;">

        <ion-label>
          <p style="font-size: 1rem; margin-top: 10px;">
            {{aspirante.asp_nombre}}
            <br>
            <i>{{aspirante.asp_cargo}}</i>
          </p>
        </ion-label>
        <ion-badge color="light" style="right: 0;" mode="ios" slot="end"> CI: {{aspirante.asp_cedula}}</ion-badge>
        <!-- <ion-label><i>{{aspirante.asp_cargo}}</i></ion-label> -->
      </ion-item>

    </ion-item>
  </ion-toolbar>
</ion-header>


<ion-content class="ion-padding">
  <p style="margin-bottom: 1em;">
    Seleccione los elementos respectivos sobre la informacion legal del
    <i>Apirante</i> que han sido validados por el departamento de Talento Humano.<br>
    <ion-text color="danger" style="font-size: small;">
      <!-- <h1>Awesome text</h1> -->
      <i>* Deben estar todos los campos validados para proceder a entrevista con el psicologo.</i>
    </ion-text>
  </p>


  <ion-item [disabled]="aspirante.atv_verificado">
    <ion-label>Posee procesos legales pendientes</ion-label>
    <ion-toggle [(ngModel)]="aspirante.atv_plegales" [checked]="aspirante.atv_plegales"
      (ionChange)="cambiarCheckbox('atv_plegales',$event)" slot="end"></ion-toggle>
    <!-- <ion-checkbox [(ngModel)]="aspirante.atv_plegales" [checked]="aspirante.atv_plegales"
      (ionChange)="cambiarCheckbox('atv_plegales',$event)" slot="end"></ion-checkbox> -->
    <!-- <ion-toggle slot="start"></ion-toggle> -->
  </ion-item>


  <ion-item [disabled]="aspirante.atv_verificado">
    <ion-label>Registra proces en Fiscal√≠a General del Estado </ion-label>
    <ion-toggle [(ngModel)]="aspirante.atv_pfiscalia" [checked]="aspirante.atv_pfiscalia"
      (ionChange)="cambiarCheckbox('atv_pfiscalia',$event)" slot="end"></ion-toggle>
    <!-- <ion-checkbox [(ngModel)]="aspirante.atv_pfiscalia" [checked]="aspirante.atv_pfiscalia"
      (ionChange)="cambiarCheckbox('atv_pfiscalia',$event)" slot="end"></ion-checkbox> -->
  </ion-item>


  <ion-item [disabled]="aspirante.atv_verificado">
    <ion-label>Existen antecedentes penales</ion-label>
    <ion-toggle [(ngModel)]="aspirante.atv_ppenales" [checked]="aspirante.atv_ppenales"
      (ionChange)="cambiarCheckbox('atv_ppenales',$event)" slot="end"></ion-toggle>
    <!-- <ion-checkbox [(ngModel)]="aspirante.atv_ppenales" [checked]="aspirante.atv_ppenales"
      (ionChange)="cambiarCheckbox('atv_ppenales',$event)" slot="end"></ion-checkbox> -->
  </ion-item>


  <ion-item [disabled]="aspirante.atv_verificado">
    <ion-label>Referencias laborales correctas?</ion-label>
    <ion-toggle [(ngModel)]="aspirante.atv_plaborales" [checked]="aspirante.atv_plaborales"
      (ionChange)="cambiarCheckbox('atv_plaborales',$event)" slot="end"></ion-toggle>
    <!-- <ion-checkbox [(ngModel)]="aspirante.atv_plaborales" [checked]="aspirante.atv_plaborales"
      (ionChange)="cambiarCheckbox('atv_plaborales',$event)" slot="end"></ion-checkbox> -->
  </ion-item>

  <div>
    <ion-list>

      <ion-radio-group [(ngModel)]="aspirante.atv_aprobado" [value]="aspirante.atv_aprobado"
        (ionChange)="setAprobado($event)" style="display: flex;">

        <ion-item [disabled]="aspirante.atv_verificado">
          <ion-label color="primary">APROBADO</ion-label>
          <ion-radio slot="start" value="SI" mode=""></ion-radio>
        </ion-item>

        <ion-item [disabled]="aspirante.atv_verificado">
          <ion-label color="danger">NO APROBADO</ion-label>
          <ion-radio value="NO" slot="start" mode=""></ion-radio>
        </ion-item>

      </ion-radio-group>
    </ion-list>


    <!-- <ion-item [hidden]="" [disabled]="aspirante.atv_verificado"> -->
    <!-- <ion-row > -->
    <!-- <ion-col size=""> -->

    <ion-list style="background: var(--ion-color-light); ">

      <ion-list-header color="primary" style="border-radius: 15px 15px 0px 0px;">
        <ion-label>OBSEVACIONES</ion-label>
        <ion-button (click)="nuevoClick()" [hidden]="aspirante.atv_verificado" fill="solid" id="hover-trigger">
           <!-- <(pointerenter)="presentPopover($event)"> -->
          <ion-icon slot="icon-only" name="add-circle" size="large"></ion-icon>
          <ion-label style="font-size: 0.7rem;">Nueva</ion-label>
        </ion-button>

        <ion-popover showBackdrop="false" side="bottom" alignment="end" arrow="true" [isOpen]="isOpen"
          (didDismiss)="isOpen=false" #popover style="--offset-y:5px; " >
          <ng-template >
            <!-- <ion-content class="ion-no-padding" style="display: flex; "> -->
              <ion-item style="padding-right: 0; --background: #3dc2ffd4;">
                <ion-icon name="information-circle-outline" color="primary"></ion-icon>
                <ion-label style="width: 100%; font-size: 0.7rem;"><i>Agregar nueva observacion</i></ion-label>
                <ion-button (click)="isOpen=false" fill="clear" shape="round" fill="clear" 
                  style="margin-right: 0px;">
                  <ion-icon name="chevron-back-circle-outline"></ion-icon>
                </ion-button>
              </ion-item>
            <!-- </ion-content> -->
          </ng-template>
        </ion-popover>
      </ion-list-header>
      <!-- <ion-item color="light"> -->
      <div>

        <div *ngFor="let item of listaObservaciones; let i = index">
          <ion-chip *ngIf=(!item.edit) color="primary" mode="ios" outline="true" (click)="chipClick(item, i)"
            style="width: fit-content;">
            <ion-label> {{item.text}} </ion-label>
            <ion-button (click)="delItemClick(i)" [hidden]="aspirante.atv_verificado" fill="clear"
              style="--padding-end: 0; --padding-start: 10px; margin-right: 0; width: auto;--color:var(--ion-color-light); --color-hover:var(--ion-color-danger)">
              <ion-icon name="close-circle-outline"></ion-icon>
            </ion-button>
          </ion-chip>

          <!-- <div> -->
          <ion-item *ngIf=(item.edit) style="display: flex; ">
            <ion-button (click)="okItemClick(item)" fill="clear" color="success" size="small">
              <ion-icon slot="icon-only" name="checkmark-circle-outline"></ion-icon>
            </ion-button>
            <ion-input type="text" placeholder="ingrese una observacion" [id]="'text-'+i" (focusout)="okItemClick(item)"
              [(ngModel)]="listaObservaciones[i].text" style="font-size: 0.9rem; font-style: italic;">
            </ion-input>
          </ion-item>
          <!-- </div> -->
        </div>

        <div *ngIf=(shownuevo) style="display: flex; background: #fff; margin: 5px;">
          <ion-item>

            <ion-button (click)="okItemClick(-1)" fill="clear" color="success" size="small">
              <ion-icon slot="icon-only" name="checkmark-circle-outline"></ion-icon>
            </ion-button>
            <ion-input type="text" placeholder="ingrese una nueva observacion" id="text-nuevo" (focusout)="hideNuevo()"
              [(ngModel)]="observacionTxt" style="font-size: 0.9rem;">
            </ion-input>

          </ion-item>
        </div>

        <!-- <ion-item>
          <ion-button (click)="onClick(observacionTxt)" slot="start" shape="round" fill="outline">
            <ion-icon slot="icon-only" name="add"></ion-icon>
          </ion-button>
        </ion-item> -->

        <!-- <ion-input></ion-input> -->
        <!-- </ion-item> -->
      </div>

    </ion-list>


    <!-- <ion-textarea class="" [(ngModel)]="aspirante.atv_observacion" [value]="aspirante.atv_observacion" type="text"
            name="atv_observacion" placeholder="Comentarios y observaciones" (ionChange)="editObservacion($event)">
          </ion-textarea> -->

    <!-- </ion-col> -->
    <!-- </ion-row> -->
    <!-- </ion-item> -->

  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-button (click)="cerrarModal()" expand="block" fill="clear" color="danger">
      Cancelar
    </ion-button>
    <ion-button [hidden]="aspirante.atv_verificado" (click)="presentAlert()" expand="block" slot="end" fill="solid"
      color="primary">
      Finalizar
    </ion-button>
  </ion-toolbar>
</ion-footer>