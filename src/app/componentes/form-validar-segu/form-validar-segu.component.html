<ion-header>
  <ion-toolbar color="primary" style="border: 3px white solid; border-radius: 15px 15px 0 0;">
    <ion-grid fixed>

      <ion-row style="padding: 10px 10px; height: 80px;">

        <ion-col size="2" style="display: flex; padding: 0px 5px 0px 0px;">
          <ion-avatar style="--border-radius:20px; margin: 0 auto; border: 2px #ffffffc0 solid;">
            <img src="assets/icon/person.png" />
          </ion-avatar>
        </ion-col>

        <ion-col size="10" style="display: inline-flex;">
          <span style="display: inline-grid;">
            <ion-label style="font-size: 1.9rem; margin-bottom: 1rem;">INDUCCIÓN DE TRABAJADORES NUEVOS</ion-label>
            <ion-label style="margin: auto 0px; text-overflow: ellipsis; white-space: nowrap;
                              overflow: hidden !important; font-size: 1.1rem; font-weight: 500;">
              {{aspirante.asp_nombre}}
            </ion-label>
          </span>
        </ion-col>
      </ion-row>

      <ion-row style="border-top: 2px #ffffff90 solid; margin-top: 5px; padding: 5px 1rem;">

        <ion-col size="6">
          <span style="display: inline-grid;">

            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="business-outline"> </ion-icon>
              PROMINE CIA. LTDA.
            </ion-label>
            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="heart-circle"> </ion-icon>
              DEPARTAMENTO DE SEGURIDAD Y SALUD
            </ion-label>
            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="information-circle"> </ion-icon>
              RUC: 0791722772001
            </ion-label>

          </span>
        </ion-col>

        <ion-col size="6">
          <span style="display: inline-grid;">

            <!-- <ion-label style="font-size: 0.8rem;">
              <ion-icon name="ribbon-outline"> </ion-icon>
              Cargo: <i>{{aspirante.asp_cargo}}</i>
            </ion-label> -->
            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="id-card-outline"> </ion-icon>
              Cédula: {{aspirante.asp_cedula}}
            </ion-label>
            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="male-female-outline"> </ion-icon>
              Sexo: <i> {{aspirante.asp_sexo}} </i>
            </ion-label>
            <ion-label style="font-size: 0.8rem;">
              <ion-icon name="hourglass"> </ion-icon>
              Edad: <i> {{asp_edad}} </i>
            </ion-label>

          </span>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-no-padding">

  <swiper-container #swiper [allowTouchMove]="false" [afterinit]="swiperReady()">

    <swiper-slide>

      <ion-card>

        <ion-card-content color="light">
          <ion-text color="danger" style="font-size: small;">
            *Seleccione los elementos respectivos sobre la informacion riesgos que entrañan las labores
            que desarrollare en mi trabajo, así como las medidas preventivas que debo tomar para hacer de esto un
            método seguro de trabajo.
          </ion-text>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Se entregó el reglamento interno de seguridad y salud en el trabajo?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vreglamentos" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Se entregó la inducción de seguridad y salud en el trabajo?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vinduccion" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Se entregaron los procedimientos escritos de trabajo seguro?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vprocedimientos" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Cuenta el trabajador con la certificación de competencias en prevención de riesgos
              laborales?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vcertificacion" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Se socializó la matriz de riesgo?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vmatrizriesgo" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label>Se realizó la respectiva evaluación de conocimiento en seguridad y salud en el
              trabajo?</ion-label>
            <ion-checkbox [(ngModel)]="aspirante.asv_vevaluacion" slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label> <b>Se realizó el entrenamiento en el puesto de trabajo?</b> </ion-label>
            <ion-checkbox slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label> <b>Se socializó las politicas de seguridad y salud en el trabajo?</b> </ion-label>
            <ion-checkbox slot="end" mode="ios"></ion-checkbox>
          </ion-item>

          <ion-item lines="inset" [disabled]="false">
            <ion-label> <b>Se realizó la entrega del EPP respectivo?</b> </ion-label>
            <ion-checkbox slot="end" mode="ios"></ion-checkbox>
          </ion-item>

        </ion-card-content>

        <ion-card-header>
          <ion-card-title class="ion-text-center" color="primary">
            OBSERVACIONES
          </ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <ion-row>
            <ion-col size="12">
              <ion-item [hidden]="" [disabled]="false" fill="outline">
                <ion-label position="floating"> Observación Final </ion-label>
                <ion-textarea [(ngModel)]="aspirante.asv_observacion" [value]="aspirante.asv_observacion"
                  placeholder="Escriba alguna observación..." [autoGrow]="true">
                </ion-textarea>
              </ion-item>
            </ion-col>
          </ion-row>
        </ion-card-content>

      </ion-card>

    </swiper-slide>


    <swiper-slide>

      <ion-card >
        <ion-card-header>
          <!-- <ion-label position="start"></ion-label> -->
          <ion-item>
            <ion-card-title>Orden de Salida de EPP</ion-card-title>
            <ion-datetime-button style="margin-left: auto;" datetime="datetime"></ion-datetime-button>
            <ion-datetime id="datetime" hidden="true"></ion-datetime>
          </ion-item>


        </ion-card-header>

        <ion-card-content style="min-height: 350px;">
          <ion-row>

            <ion-col size="4">
              <ion-item fill="outline" mat-raised-button matTooltipPosition="below"
                matTooltipClass="popover-item" matTooltip="Ingresar el área en donde el empleado va a desempeñar su trabajo.">
                <!-- <ion-label position="floating">Lugar a utilizar</ion-label> -->
                <!-- <ion-item> -->
                  <ion-label>Lugar</ion-label>
                  <ion-select [value]="aspirante.asv_lugar" interface="popover" placeholder="Seleccione el lugar">
                    <ion-select-option value="MINA">MINA</ion-select-option>
                    <ion-select-option value="PLANTA">PLANTA</ion-select-option>
                    <ion-select-option value="ADMINISTRACION">ADMINISTRACION</ion-select-option>
                  </ion-select>
                <!-- </ion-item> -->
                <!-- <ion-input style="color: black;" placeholder="Ingrese el lugar de trabajo" [(ngModel)]="aspirante.asv_lugar"[disabled]="false"></ion-input> -->
              </ion-item>
            </ion-col>

            <!-- <ion-col size="6">
              <mat-form-field appearance="outline" style="width: 100%;">
                <mat-label>Lugar a utilizar</mat-label>
                <input matInput placeholder="Ingrese el area a usar el EPP" type="text"
                  [(ngModel)]="aspirante.asv_lugar" style="text-transform:uppercase;">
                <mat-icon matSuffix>construction</mat-icon>
              </mat-form-field>
            </ion-col> -->

            <ion-col size="7" style="display: flex;" class="ion-justify-content-center">
             <ion-item [disabled]="false" mat-raised-button matTooltipPosition="below" fill="outline"
                [matTooltipShowDelay]="500" matTooltipClass="popover-item"
                matTooltip="Escribe el nombre o codigo del articulo para mostrar la lista. Luego selecciona el articulo correspondiente para ingresar la cantidad."
                style="width: 95%;">
                <ion-input matInput placeholder="Equipos y herramientas" [debounce]="1000" (ionChange)="handleChange($event)"
                  (ionBlur)="handleClear()" (ionInput)="handleBlur()" [(ngModel)]="txtbusqueda"
                  style="text-align: center;">
                </ion-input>
                <ion-icon aria-hidden="true" *ngIf="!isbuscando" name="search-circle-outline" color="warning"
                  size="large"></ion-icon>
                <ion-spinner name="circles" *ngIf="isbuscando" color="warning"></ion-spinner>
              </ion-item>
            </ion-col>

            <ion-col size="12">
              <ion-list class="lista-articulos" [hidden]="lista_filter.length==0" color="primary" #list id="lista-epp">
                <ion-item *ngFor="let result of lista_filter" button="true" (click)="addArticulo(result)"
                  [disabled]="isInAspiranteEpp(result)">
                  <ion-label [innerHTML]="getNombreStyle(result.codigo + ' - ' + result.item)"> </ion-label>
                </ion-item>
                <ion-fab vertical="top" horizontal="end" style="right: 0px;">
                  <ion-fab-button (mousedown)="onMouseDown($event,tooltip)" class="fab-mover" translucent="true"
                    mat-raised-button matTooltip="Haz clic aqui para mover la lista" matTooltipPosition="above"
                    [matTooltipShowDelay]="9000" matTooltipClass="popover-item" #tooltip="matTooltip">
                    <ion-icon size="small" name="move-outline"></ion-icon>
                  </ion-fab-button>
                </ion-fab>
              </ion-list>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col size="12" class="ion-no-padding"></ion-col>

            <ion-item (click)="openListaEpp(eppselect, $event)" style="width: 100%;" color="light" [disabled]="false">
              <ion-select aria-label="fruit" (ionChange)="setArticulo($event)" placeholder="Seleccionar EPP" mode="ios"
                hidden="true" multiple="true" #eppselect  id="epp-select" interface="alert" [interfaceOptions]="customAlertOptions">

                <ion-select-option *ngFor="let articulo of lista_filter2" [value]="articulo"
                  [disabled]="isInAspiranteEpp(articulo)"> {{articulo.codigo }} - {{ articulo.item}}
                </ion-select-option>
              </ion-select>
              <!-- <ion-button expand="block" fill="clear" shape="round"> -->
              <ion-label color="primary" class="ion-text-uppercase" style="text-decoration: underline;">
                <ion-icon size="small" name="list"></ion-icon>
                LISTA EPP
              </ion-label>
              <!-- </ion-button> -->
              <ion-label color="primary"><i>Articulos seleccionados: {{aspirante_epp.length}}</i></ion-label>

            </ion-item>
            <!-- </ion-list> -->

            <!-- </ion-chip> -->
            <ion-list style="border: 1px var(--ion-color-primary) solid; border-radius: 10px; width: 100%;"
              [hidden]="aspirante_epp.length==0">
              <ion-item *ngFor="let result of aspirante_epp; let i = index" [disabled]="false">
                <span>{{ result.codigo +' - '+ result.item }}</span>
                <ion-chip color="primary" mode="ios" outline="true" slot="end">
                  <ion-label style="margin-right: 5px;">cant. </ion-label>
                  <ion-input type="number" [(ngModel)]="result.cantidad" style="width: 50px;" [id]="'item-cantidad-'+i"
                    autofocus="true"></ion-input>
                </ion-chip>
                <ion-button (click)="delArticulo(i)" slot="end" shape="round" fill="clear" color="danger">
                  <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
                </ion-button>
              </ion-item>
            </ion-list>
          </ion-row>
        </ion-card-content>
      </ion-card>

    </swiper-slide>


    <swiper-slide>

      <ion-card>

        <ion-card-header>
          <ion-card-title class="ion-text-center" color="primary">
            <ion-icon name="cloud-upload"></ion-icon>
            {{(aspirante.asv_verificado==false)?'SUBIR ':'DESCARGAR '}} DOCUMENTOS DEL ASPIRANTE
          </ion-card-title>
        </ion-card-header>

        <ion-card-content>


          <ion-row class="ion-align-items-end">

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Induccion')" [tarea]="'subirseguinduccion'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlinduccionsst"
                [verificado]="false"
                [titulo]="'1. Inducción de seguridad y salud en el trabajo'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Procedimiento')" [tarea]="'subirseguprocedimiento'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlprocedimiento"
                [verificado]="false"
                [titulo]="'2. Procedimiento escrito de trabajo seguro'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Certificacion')" [tarea]="'subirsegucertificacion'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlcertificacion"
                [verificado]="false"
                [titulo]="'3. Certificación de competencias en prevención de riesgos laborales'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Entrenamiento')" [tarea]="'subirseguentrenamiento'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlentrenamiento"
                [verificado]="false"
                [titulo]="'4. Entrenamiento en el puesto de trabajo'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Matrizriesgos')" [tarea]="'subirsegumatrizriesgos'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlmatrizriesgos"
                [verificado]="false" [titulo]="'5. Matriz de riesgos'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Evaluacion')" [tarea]="'subirseguevaluacion'"
                [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlevaluacion"
                [verificado]="false"
                [titulo]="'6. Evaluación de conocimientos en seguridad y salud en el trabajo'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata  (setArchivo)="archivoListo($event,'Reglamento')" [tarea]="'subirsegureglamento'"
              [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlreglamento"
                [verificado]="false"
                [titulo]="'7. ***Reglamento interno'"></app-file-formdata>
            </ion-col>

            <ion-col size="6">
              <app-file-formdata (setArchivo)="archivoListo($event,'Politicas')" [tarea]="'subirsegupolitica'"
              [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urlpolitica"
                [verificado]="false"
                [titulo]="'8. ***Política de seguridad y salud en el trabajo'"></app-file-formdata>
            </ion-col>

            <ion-col size="12">
              <app-file-formdata (setArchivo)="archivoListo($event,'Epplista')" [tarea]="'subirseguepp'"
              [aspirante]="aspirante.asp_cedula" [urlarchivo]="aspirante.asv_urllistaepp"
                [verificado]="false"
                [titulo]="'9. ***Equipo de Protección Personal (EPP)'"></app-file-formdata>
            </ion-col>

          </ion-row>

        </ion-card-content>

      </ion-card>

    </swiper-slide>

  </swiper-container>
</ion-content>

<ion-footer class="ion-padding" [translucent]="true" mode="md">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="cerrarModal()" fill="outline" color="danger" slot="start">
        Cancelar
      </ion-button>
    </ion-buttons>

    <ion-buttons slot="end" style="margin-right: 20px;">
      <!-- <div style="display: inline-flex;" slot="secondary"> -->
        <ion-button (click)="setSlide(0)" [color]="(selectSlide==0)?'warning':'light'" [fill]="(selectSlide==0)?'solid':'solid'"
            [shape]="(selectSlide==0)?undefined:'round'">
          <ion-label [color]="(selectSlide==0)?'dark':'medium'">1</ion-label>
          <ion-icon name="checkmark-done-outline" *ngIf="selectSlide==0" slot="end"></ion-icon>
        </ion-button>
        <ion-button  (click)="setSlide(1)" [color]="(selectSlide==1)?'warning':'light'" [fill]="(selectSlide==1)?'solid':'solid'"
            [shape]="(selectSlide==1)?undefined:'round'">
          <ion-label [color]="(selectSlide==1)?'dark':'medium'">2</ion-label>
          <ion-icon name="medkit-outline" *ngIf="selectSlide==1" slot="end"></ion-icon>
        </ion-button>
        <ion-button (click)="setSlide(2)" [color]="(selectSlide==2)?'warning':'light'" [fill]="(selectSlide==2)?'solid':'solid'"
            [shape]="(selectSlide==2)?undefined:'round'">
          <ion-label [color]="(selectSlide==2)?'dark':'medium'">3</ion-label>
          <ion-icon name="documents-outline" *ngIf="selectSlide==2" slot="end"></ion-icon>
        </ion-button>
      <!-- </div> -->
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-button (click)="presentAlert()" expand="block" slot="end" fill="solid" color="primary">
        Finalizar
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
